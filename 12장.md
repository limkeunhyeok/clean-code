# Clean Code

## 12장 창발성

### 창발적인 설계로 깔끔한 코드를 구현하자

- 창발이란 하위 계층에는 없는 특성이나 행동이 상위 계층에서 자발적으로 돌연히 출현하는 현상을 말한다
  - 어떤 규칙과 원칙에 따라 설계를 하게 되면, 그것들이 모여 아주 좋은 거시적 설계가 된다

#### 켄트벡 단순한 설계 규칙 4가지

1. 모든 테스트를 실행한다.
2. 중복을 없앤다.
3. 프로그래머 의도를 표현한다.
4. 클래스와 메서드 수를 최소로 줄인다.

> 위 4가지를 따르는 설계는 단순하다. 코드 구조와 설계 파악이 쉬워지고, SRP나 DIP과 같은 원칙 적용이 쉬워지고 우수한 설계의 창발성 촉진한다

### 단순한 설계 규칙 1: 모든 테스트를 실행하라

- 문서로 의도한 대로 돌아가는 시스템을 설계했어도 검증 방법이 없으면 문서 작업의 노력을 인정 받기 어렵다
- 테스트가 가능한 시스템 = 테스트를 철저히 거쳐 모든 테스트 케이스를 항상 통과하는 시스템
  - 테스트가 불가능한 시스템 -> 검증이 불가하고 출시할 수 없다
- 테스트가 가능한 시스템
  - 설계 품질이 증가한다
  - 크기가 작고 하나의 목적만 수행하는 클래스가 나온다 -> 테스트가 쉽다
- 테스트 케이스를 만들고 계속 돌리게 되면 객체 지향 방법론의 목표(낮은 결합도와 높은 응집력)를 달성 가능하다
  - 결합도가 높으면 테스트 케이스 작성이 어렵다

> 테스트 케이스를 작성하면 설계 품질이 높아진다!

### 단순한 설계 규칙 2~4: 리팩토링

- 테스트 케이스 작성 완료 시, 점진적으로 코드 및 클래스를 정리하자
- 리팩토링 단계
  - 소프트웨어 품질을 높이는 기법 적용
    - 응집도 ↑, 결합도 ↓, 관심사 분리, 시스템 관심사 모듈로 나눔, 함수와 클래스 크기 ↓, 더 나은 이름 선택 등
  - 중복 제거, 프로그래머의 의도 표현, 클래스와 메서드를 최소로 줄이는 단계

### 중복을 없애라

- 중복은 추가 작업, 추가 위험, 불필요한 복잡도를 의미한다

1. 똑같은 코드
  - 비슷한 코드를 더 비슷하게 고치면 리팩토링이 쉬워진다
2. 구현 중복
  - TEMPLATE METHOD 패턴(고차원 중복을 제거할 목적으로 사용)을 적용해 중복을 제거하자

### 표현하라

- 개발자의 의도를 분명히 표현하고 개발자가 명백하게 코드를 짤수록 다른 사람이 코드를 이해하기 쉬워진다
  - 결함이 줄어들고, 유지 보수 비용이 줄어든다

#### 개발자의 의도를 분명히 표현한 코드를 짜는 방법

1. 좋은 이름을 선택한다
2. 함수와 클래스 크기를 가능한 줄인다
3. 표준 명칭을 사용한다
4. 단위 테스트 케이스를 꼼꼼히 작성한다

### 클래스와 메서드 수를 최소로 줄여라

- 중복 제거, 의도 표현, SRP를 준수하는 것에 너무 치중하기 보단, 함수와 클래스 수를 최대한 줄여라

> 목표는 함수와 클래스 크기를 작게 유지하면서 동시에 시스템 크기도 작게 유지하자
